replicaCount: 1

image:
  repository: ghcr.io/tehnotrube/rating-service
  pullPolicy: IfNotPresent
  tag: "v1.0.0"

imagePullSecrets: []
# - name: ghcr-secret

service:
  type: ClusterIP
  port: 3001

# MongoDB configuration for rating-service
mongodb:
  host: ""  # Will be templated to {{ .Release.Name }}-mongodb
  port: "27017"
  database: "ratingsdb"
  username: "ratingservice"
  existingSecret: ""  # Will be templated
  secretKeys:
    rootPasswordKey: "mongodb-root-password"
    passwordKey: "mongodb-passwords"
  authDatabase: "admin"

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

# Enhanced health checks with proper thresholds
livenessProbe:
  httpGet:
    path: /health
    port: 3001
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
  successThreshold: 1

readinessProbe:
  httpGet:
    path: /ready
    port: 3001
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3
  successThreshold: 1

# Ingress configuration - disabled by default, enabled in umbrella chart
ingress:
  enabled: false
  className: kong
  annotations:
    konghq.com/strip-path: "false"
    konghq.com/preserve-host: "true"
  hosts:
    - host: api.trubanb.local
      paths:
        - path: /api/ratings
          pathType: Prefix

# Additional environment variables
extraEnv: []
# - name: LOG_LEVEL
#   value: "info"
# - name: CACHE_TTL
#   value: "300"
