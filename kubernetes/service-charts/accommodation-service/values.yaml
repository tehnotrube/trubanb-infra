replicaCount: 1

image:
  repository: ghcr.io/tehnotrube/accommodation-service
  pullPolicy: IfNotPresent
  tag: "v1.0.0"

imagePullSecrets: []
# - name: ghcr-secret

service:
  type: ClusterIP
  port: 3001

# Database configuration for accommodation-service
database:
  host: ""  # Will be templated to {{ .Release.Name }}-accommodation-postgresql
  port: "5432"
  name: "accommodationdb"
  username: "accommodationservice"
  # Reference to external secret (created by PostgreSQL chart)
  existingSecret: ""  # Will be templated
  secretKeys:
    passwordKey: "password"

# MinIO/S3 Storage configuration
minio:
  host: ""  # Will be templated to {{ .Release.Name }}-minio
  port: "9000"
  useSSL: "false"
  bucket: "accommodations"
  # Reference to external secret (created by MinIO chart)
  existingSecret: ""  # Will be templated to {{ .Release.Name }}-minio
  secretKeys:
    rootUserKey: "rootUser"
    rootPasswordKey: "rootPassword"

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

# Enhanced health checks with proper thresholds
livenessProbe:
  httpGet:
    path: /health
    port: 3001
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
  successThreshold: 1

readinessProbe:
  httpGet:
    path: /ready
    port: 3001
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3
  successThreshold: 1

# Ingress configuration - disabled by default, enabled in umbrella chart
ingress:
  enabled: false
  className: kong
  annotations:
    konghq.com/strip-path: "false"
    konghq.com/preserve-host: "true"
  hosts:
    - host: api.trubanb.local
      paths:
        - path: /api/accommodations
          pathType: Prefix

# Additional environment variables
extraEnv: []
# - name: LOG_LEVEL
#   value: "info"
# - name: STORAGE_BUCKET
#   value: "accommodation-images"
