{{- if .Values.kong.jwt.enabled -}}
apiVersion: configuration.konghq.com/v1
kind: KongPlugin
metadata:
  name: jwt-header-transformer
  labels:
    {{- include "user-service.labels" . | nindent 4 }}
plugin: request-transformer
config:
  add:
    headers:
      - "X-User-Id:$(jwt_claim_sub)"
      - "X-User-Email:$(jwt_claim_email)"
      - "X-User-Role:$(jwt_claim_role)"
{{- end }}
